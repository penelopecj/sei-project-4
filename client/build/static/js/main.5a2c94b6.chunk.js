(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{177:function(e,t,a){},232:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(0),r=a.n(c),s=a(39),i=a.n(s),o=(a(176),a(177),a(13)),l=a(14);function u(){return window.localStorage.getItem("token")}function j(){var e=u();if(!e)return!1;var t=e.split(".");return!(t.length<3)&&JSON.parse(atob(t[1]))}function d(){var e=j();return!!e&&Math.round(Date.now()/1e3)<e.exp}function b(e){var t=j();return!!t&&e===t.sub}var h=function(){Object(l.g)();var e=d(),t=Object(l.f)();return Object(n.jsxs)("nav",{children:[Object(n.jsx)(o.b,{to:"/",children:Object(n.jsx)("div",{className:"logo",children:Object(n.jsxs)("span",{children:[Object(n.jsx)("p",{children:"PIEKEA"}),Object(n.jsx)("small",{children:"\xae"})]})})}),Object(n.jsxs)("section",{children:[Object(n.jsx)(o.b,{to:"/pies",children:Object(n.jsx)("span",{className:"material-icons",children:"home_mini"})}),Object(n.jsx)(o.b,{to:"/profile",children:Object(n.jsx)("span",{className:"material-icons",children:"person_outline"})}),Object(n.jsx)(o.b,{to:"/wishlist",children:Object(n.jsx)("span",{className:"material-icons",children:"favorite_border"})}),Object(n.jsx)(o.b,{to:"/basket",children:Object(n.jsx)("span",{className:"material-icons",children:"work_outline"})}),e?Object(n.jsx)("div",{className:"flex-box",children:Object(n.jsx)(o.b,{children:Object(n.jsx)("p",{className:"black-outline",onClick:function(){window.localStorage.removeItem("token"),t.push("/")},children:"Logout"})})}):Object(n.jsxs)("div",{className:"flex-box",children:[Object(n.jsx)(o.b,{to:"/register",children:Object(n.jsx)("p",{className:"black-outline",children:"Register"})}),Object(n.jsx)(o.b,{to:"/login",children:Object(n.jsx)("p",{className:"black-outline",children:"Login"})})]})]})]})},p=a(18),m=a(6),x=a.n(m),O=a(11),f=a(12),v=a(154),g=a.n(v),w=a(155),N=a(22),k=a.n(N);function y(){return{headers:{Authorization:"Bearer ".concat(u())}}}var S="/api";function C(){return k.a.get("".concat(S,"/pies/"))}function E(e){return k.a.post("".concat(S,"/pies/"),e,y())}function F(e){return k.a.get("".concat(S,"/pies/").concat(e,"/"))}function P(){return k.a.get("".concat(S,"/auth/profile/"),y())}function L(e,t){return k.a.put("".concat(S,"/auth/users/").concat(e,"/"),t,y())}function I(e){return k.a.post("".concat(S,"/auth/register/"),e)}function A(e){return k.a.post("".concat(S,"/auth/login/"),e)}function q(){return k.a.get("".concat(S,"/basket/"),y())}function R(e){return k.a.post("".concat(S,"/basket/"),e,y())}function T(e,t){return k.a.put("".concat(S,"/basket/").concat(e,"/"),t,y())}function B(e){return k.a.post("".concat(S,"/reviews/"),e,y())}function M(e){return k.a.delete("".concat(S,"/reviews/").concat(e,"/"),y())}function W(){return k.a.get("".concat(S,"/categories/"))}var _=function(){var e=r.a.useState(null),t=Object(f.a)(e,2),a=t[0],c=t[1],s=r.a.useState(!1),i=Object(f.a)(s,2),l=i[0],u=i[1];r.a.useEffect((function(){(function(){var e=Object(O.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C();case 3:t=e.sent,a=t.data,c(a),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),u(!0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var j=[];return function(){if(a)for(var e=0;e<=a.length;e++)1!==e&&6!==e&&7!==e&&8!==e&&10!==e||j.push(a[e])}(),console.log(j),Object(n.jsx)(w.a,{children:Object(n.jsxs)("div",{className:"slider-container",children:[Object(n.jsx)("h4",{className:"pies-list"}),a?Object(n.jsx)(g.a,Object(p.a)(Object(p.a)({},{dots:!1,infinite:!0,slidesToShow:3,slidesToScroll:1,autoplay:!0,autoplaySpeed:4e3,pauseOnHover:!0}),{},{children:j.map((function(e){return Object(n.jsx)("div",{className:"card",children:Object(n.jsx)("div",{className:"homepage-card-name",children:Object(n.jsx)("div",{className:"ui-card img-wrapper",children:Object(n.jsxs)(o.b,{to:"/pies/".concat(e.id,"/"),children:[Object(n.jsx)("img",{className:"images",src:e.image},e.id),Object(n.jsx)("div",{className:"homepage-card-overlay",children:e.name})]})})})},e.id)}))})):Object(n.jsx)("h2",{className:"title has-text-centered",children:l?"There was An Error":"...loading "})]})})};var D=function(){return Object(n.jsxs)("main",{className:"homepage",children:[Object(n.jsx)("h1",{className:"noto-sans",children:"Welcome to PIEKEA"}),Object(n.jsx)("p",{className:"slogan",children:"Online store for fresh baked pies and custom creations. You can even build your own!"}),Object(n.jsxs)("section",{className:"yellow-background order-online",children:[Object(n.jsx)("h3",{children:"Order online to collect safely in store, or for home delivery"}),Object(n.jsx)("p",{children:"Whilst our stores are temporarily closed you can still browse for baking inspiration, book an online planning appointment, and place orders for contact-free delivery or click and collect."}),Object(n.jsx)("button",{children:"Read more"})]}),Object(n.jsxs)("div",{className:"homepage-slider-section",children:[Object(n.jsx)("h2",{className:"noto-sans",children:"Pie Taster Selecti\xf6n"}),Object(n.jsx)(_,{})]})]})},U=a.p+"static/media/defaultImage.8973ad91.jpg";var H=function(){var e=r.a.useState(null),t=Object(f.a)(e,2),a=t[0],c=t[1];return r.a.useEffect((function(){(function(){var e=Object(O.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P();case 3:t=e.sent,a=t.data,c(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.jsxs)("main",{className:"profile-page",children:[Object(n.jsx)("h1",{className:"noto-sans",children:"My \xc5cc\xf6unt"}),a?Object(n.jsxs)("section",{className:"box",children:[Object(n.jsxs)("h2",{children:["Hello, ",a.firstName," ",a.lastName,"!"]}),Object(n.jsx)("figure",{children:a.profileImage?Object(n.jsx)("img",{src:a.profileImage,alt:"profile image"}):Object(n.jsx)("img",{src:U,alt:"profile image"})}),Object(n.jsx)("h3",{children:"Your details are shown below:"}),Object(n.jsxs)("h4",{children:["Username: ",a.username]}),Object(n.jsxs)("h4",{children:["Email address: ",a.email]}),Object(n.jsxs)("h4",{children:["Address: ",a.address]}),Object(n.jsxs)("h4",{children:["Phone number: ",a.phoneNumber]})]}):Object(n.jsxs)("div",{children:[Object(n.jsx)(o.b,{to:"/register",children:"Register "}),"or",Object(n.jsx)(o.b,{to:"/login",children:" Login "})," to view your account details."]})]})};var J=function(){var e=r.a.useState(null),t=Object(f.a)(e,2),a=t[0],c=t[1];return r.a.useEffect((function(){(function(){var e=Object(O.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P();case 3:t=e.sent,a=t.data,c(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]),console.log(a),Object(n.jsxs)("main",{children:[Object(n.jsx)("h1",{className:"noto-sans",children:"Wish List"}),Object(n.jsxs)("p",{children:["Manage your ",Object(n.jsx)("u",{children:"Wish lists"})]}),Object(n.jsx)("section",{className:"wishlist",children:a?Object(n.jsx)("ul",{children:a.favourites.map((function(e){return Object(n.jsx)("li",{className:"box",children:Object(n.jsxs)(o.b,{to:"pies/".concat(e.id),className:"flex-box space-between",children:[Object(n.jsx)("figure",{children:Object(n.jsx)("img",{src:e.image,alt:e.name})}),Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:e.name}),Object(n.jsxs)("h4",{children:["\xa3",e.price.toFixed(2)]}),Object(n.jsx)("p",{children:e.description})]})]})},e.id)}))}):Object(n.jsx)("p",{children:"Loading..."})})]})},V=a(40);var Y=function(e){var t=r.a.useState(e),a=Object(f.a)(t,2),n=a[0],c=a[1],s=r.a.useState(e),i=Object(f.a)(s,2),o=i[0],l=i[1];return{formdata:n,setFormdata:c,errors:o,handleChange:function(e){var t="checkbox"===e.target.type?JSON.parse(e.target.value):e.target.value,a=Object(p.a)(Object(p.a)({},n),{},Object(V.a)({},e.target.name,t)),r=Object(p.a)(Object(p.a)({},o),{},Object(V.a)({},e.target.name,""));c(a),l(r)},setErrors:l}},G=a(247),K=a(249);var z=function(){var e=Object(l.f)(),t=r.a.useState(!1),a=Object(f.a)(t,2),c=a[0],s=a[1],i=Y({email:"",password:""}),u=i.formdata,j=i.handleChange,d=function(){var t=Object(O.a)(x.a.mark((function t(a){var n,c;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,A(u);case 4:n=t.sent,c=n.data,r=c.token,window.localStorage.setItem("token",r),e.push("/pies"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),s(!0);case 13:case"end":return t.stop()}var r}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}(),b=function(){s(!1)};return Object(n.jsx)("main",{className:"narrow-page box",children:Object(n.jsx)("div",{className:"ui container slide-in",children:Object(n.jsx)("section",{className:"login-form-container",children:Object(n.jsxs)("div",{className:"container-for-login",children:[Object(n.jsx)("h1",{className:"noto-sans",children:"Login"}),Object(n.jsx)("div",{className:"form-box ui form error",children:Object(n.jsxs)(G.a,{onSubmit:d,className:"login-form",children:[Object(n.jsxs)(G.a.Field,{children:[Object(n.jsx)("label",{children:"Email"}),Object(n.jsx)("input",{className:"login-input",placeholder:"Email",onChange:j,name:"email",value:u.email,onFocus:b})]}),Object(n.jsxs)(G.a.Field,{children:[Object(n.jsx)("label",{children:"Password"}),Object(n.jsx)("input",{className:"login-input",type:"password",placeholder:"Password",onChange:j,name:"password",value:u.password,onFocus:b})]}),c&&Object(n.jsxs)("div",{className:"ui error message small",children:[Object(n.jsx)("div",{className:"header",children:"Incorrect Password or Email"}),Object(n.jsx)("p",{children:"Sorry, your username or password are incorrect."})]}),Object(n.jsx)("div",{className:"login-button",children:Object(n.jsx)(K.a,{type:"submit",children:"Log In"})}),Object(n.jsxs)("p",{className:"register-link",children:["Don't have an account? Sign up ",Object(n.jsx)(o.b,{to:"/register",children:"here"})]})]})})]})})})})},Q=a(245);var X=function(){var e=Object(l.f)(),t=Y({username:"",firstName:"",lastName:"",email:"",password:"",passwordConfirmation:""}),a=t.formdata,c=t.errors,r=t.handleChange,s=t.setErrors,i=function(){var t=Object(O.a)(x.a.mark((function t(n){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,console.log(a),t.next=5,I(a);case 5:e.push("/login"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),s(t.t0.response.data.errors);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}();return Object(n.jsx)("main",{className:"narrow-page box",children:Object(n.jsx)("div",{className:"ui container fly-in",children:Object(n.jsxs)("section",{className:"register-form-container ".concat(c?"register-error-form-container ":""),children:[Object(n.jsx)("h1",{className:"noto-sans",children:"Sign Up"}),Object(n.jsx)("div",{className:"form-box ui form error",children:Object(n.jsxs)(G.a,{onSubmit:i,children:[Object(n.jsx)(Q.a,{}),Object(n.jsxs)(G.a.Field,{children:[Object(n.jsx)("label",{children:"Username"}),Object(n.jsx)("input",{placeholder:"Username",onChange:r,name:"username",value:a.username})]}),c&&c.username&&Object(n.jsx)("div",{className:"ui error message small",children:Object(n.jsx)("p",{children:"Username is Required"})}),Object(n.jsxs)(G.a.Group,{className:"name-errors",children:[Object(n.jsxs)(G.a.Field,{children:[Object(n.jsx)("label",{children:"First Name"}),Object(n.jsx)("input",{placeholder:"First Name",onChange:r,name:"firstName",value:a.firstName})]}),Object(n.jsxs)(G.a.Field,{children:[Object(n.jsx)("label",{children:"Last Name"}),Object(n.jsx)("input",{placeholder:"Last Name",onChange:r,name:"lastName",value:a.lastName})]})]}),Object(n.jsxs)("div",{className:"name-errors-form",children:[Object(n.jsx)("div",{className:"first-name",children:c&&c.firstName&&Object(n.jsx)("div",{className:"ui error message small",children:Object(n.jsx)("p",{children:"First Name is Required"})})}),Object(n.jsx)("div",{className:"last-name",children:c&&c.lastName&&Object(n.jsx)("div",{className:"ui error message small",children:Object(n.jsx)("p",{children:"Last Name is Required"})})})]}),Object(n.jsxs)(G.a.Field,{children:[Object(n.jsx)("label",{children:"Email"}),Object(n.jsx)("input",{placeholder:"Email",onChange:r,name:"email",value:a.email})]}),c&&c.email&&Object(n.jsx)("div",{className:"ui error message small",children:Object(n.jsx)("p",{children:"Email is Required"})}),Object(n.jsxs)(G.a.Field,{children:[Object(n.jsx)("label",{children:"Password"}),Object(n.jsx)("input",{type:"password",placeholder:"Password",onChange:r,name:"password",value:a.password})]}),c&&c.password&&Object(n.jsx)("div",{className:"ui error message small",children:Object(n.jsx)("p",{children:"Password is Required"})}),Object(n.jsxs)(G.a.Field,{children:[Object(n.jsx)("label",{children:"Password Confirmation"}),Object(n.jsx)("input",{type:"password",placeholder:"Password Confirmation",onChange:r,name:"passwordConfirmation",value:a.passwordConfirmation})]}),c&&c.passWordConfirmation&&Object(n.jsx)("div",{className:"ui error message small",children:Object(n.jsx)("p",{children:"The Password doesnt match"})}),Object(n.jsx)("div",{className:"sign-up-button",children:Object(n.jsx)(K.a,{type:"submit",children:"Sign Up"})}),Object(n.jsxs)("p",{className:"register-link",children:["Already have an account? Login ",Object(n.jsx)(o.b,{to:"/login",children:"here"})]})]})})]})})})},Z=a(52);var $=function(e){var t=r.a.useState(e),a=Object(f.a)(t,2),n=a[0],c=a[1],s=r.a.useState(e),i=Object(f.a)(s,2),o=i[0],l=i[1];return{formdata:n,setFormdata:c,errors:o,handleChange:function(e){var t="checkbox"===e.target.type?e.target.checked:e.target.value,a=Object(Z.a)(n);a[e.target.id].quantity=t;var r=Object(p.a)(Object(p.a)({},o),{},Object(V.a)({},e.target.name,""));c(a),console.log("formdata",n),l(r)},setErrors:l}};var ee=function(){var e=r.a.useState(null),t=Object(f.a)(e,2),a=t[0],c=t[1],s=r.a.useState(null),i=Object(f.a)(s,2),o=i[0],l=i[1],u=$({quantity:""}),d=u.formdata,b=u.setFormdata,h=u.handleChange;r.a.useEffect((function(){(function(){var e=Object(O.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q();case 3:t=e.sent,a=t.data,c(a),b(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.useEffect((function(){(function(){var e=Object(O.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P();case 3:t=e.sent,a=t.data,l(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var p=j(),m=function(){var e=Object(O.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r=t.target.id,k.a.delete("".concat(S,"/basket/").concat(r,"/"),y());case 3:return e.next=5,q();case 5:a=e.sent,n=a.data,c(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}var r}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();console.log("basket items",a);var v=function(){var e=Object(O.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T(t.target.id,d[parseInt(t.target.className)]);case 3:return e.next=5,q();case 5:a=e.sent,n=a.data,c(n),console.log(t.target.className),console.log(typeof parseInt(t.target.className)),console.log(T),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();console.log("From basket js",d);var g=function(){var e=Object(O.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.favourites.map((function(e){return e.id})),e.next=3,L(p.sub,{favourites:[].concat(Object(Z.a)(a),[t.target.id])});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)("main",{className:"narrow-page",children:[Object(n.jsx)("h1",{className:"noto-sans",children:"Sh\xf6pping Bag"}),Object(n.jsx)("p",{children:"Please review and cofirm your order."}),a&&a.length>0?Object(n.jsxs)("div",{className:"checkout-basket",children:[a.map((function(e,t){return Object(n.jsxs)("div",{className:"flex-box basket-item",children:[Object(n.jsx)("figure",{children:Object(n.jsx)("img",{src:e.product.image,alt:e.product.name})}),Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:e.product.name}),Object(n.jsx)("p",{children:Object(n.jsxs)("strong",{children:["\xa3",e.product.price.toFixed(2)]})}),e.product.categories.length>0?Object(n.jsx)("ul",{children:e.product.categories.map((function(e){return Object(n.jsx)("li",{children:e.name},e.id)}))}):Object(n.jsx)("ul",{}),Object(n.jsxs)("div",{className:"change-quantity",children:[Object(n.jsx)("p",{children:"Quantity: "}),Object(n.jsx)("input",{placeholder:e.quantity,onChange:h,id:t,name:"quantity",type:"number",max:"15",min:"1",value:d.quantity}),Object(n.jsx)("button",{onClick:v,id:e.id,className:t,children:"Update item"})]}),Object(n.jsx)("p",{onClick:m,id:e.id,className:"remove-add-btn",children:"Remove"}),Object(n.jsx)("p",{onClick:g,id:e.product.id,className:"remove-add-btn",children:"Add to your wish list"})]})]},e.id)})),Object(n.jsx)("h2",{children:"Order summary"}),Object(n.jsxs)("div",{className:"space-between black-underline",children:[Object(n.jsx)("p",{children:"Total service cost"}),Object(n.jsx)("p",{children:"Excluding service cost"})]}),Object(n.jsxs)("div",{className:"space-between align-center",children:[Object(n.jsx)("p",{children:Object(n.jsx)("strong",{children:"Subtotal Inc VAT"})}),Object(n.jsxs)("p",{className:"total",children:["\xa3",a.reduce((function(e,t){return e+t.product.price*t.quantity}),0).toFixed(2)]})]}),Object(n.jsx)("button",{className:"blue-background checkout-btn",children:"Continue to checkout"}),Object(n.jsx)("h5",{children:"\u21a9\ufe0e 365 days to change your mind"}),Object(n.jsx)("h5",{children:"\u238b Secure shopping with SSL data encryption"})]}):Object(n.jsx)("p",{children:"Your basket is empty..."})]})};var te=function(){var e=r.a.useState(null),t=Object(f.a)(e,2),a=t[0],c=t[1],s=r.a.useState(null),i=Object(f.a)(s,2),l=i[0],u=i[1];r.a.useEffect((function(){(function(){var e=Object(O.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C();case 3:t=e.sent,a=t.data,c(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.useEffect((function(){(function(){var e=Object(O.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W();case 3:t=e.sent,a=t.data,u(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var j=function(e){var t=a.filter((function(t){return t.categories.includes(parseInt(e.target.id))}));c(t)},d=function(){var e=Object(O.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:t=e.sent,a=t.data,c(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsxs)("main",{children:[Object(n.jsxs)("div",{className:"bread-crumbs",children:[Object(n.jsx)("p",{children:"Bakery "}),Object(n.jsx)("p",{children:Object(n.jsx)("span",{className:"material-icons",children:"keyboard_arrow_right"})}),Object(n.jsx)("p",{children:"Pies"})]}),Object(n.jsx)("h1",{className:"noto-sans",children:"\xc4ll Pies"}),l?Object(n.jsxs)("div",{className:"categories-wrapper",children:[l.map((function(e){return Object(n.jsx)("button",{id:e.id,onClick:j,children:e.name},e.id)})),Object(n.jsx)("button",{onClick:d,className:"clear-btn",children:"Clear Selection"})]}):Object(n.jsx)("div",{children:"Filters loading..."}),Object(n.jsx)("br",{}),a&&a.length>0?Object(n.jsx)("section",{className:"product-index",children:a.map((function(e){return Object(n.jsx)("div",{className:"box product",children:Object(n.jsxs)(o.b,{to:"pies/".concat(e.id),children:[Object(n.jsxs)("div",{className:"space-between",children:[Object(n.jsx)("h3",{children:e.name}),Object(n.jsxs)("p",{children:["\xa3",e.price.toFixed(2)]})]}),Object(n.jsx)("figure",{children:Object(n.jsx)("img",{src:e.image,alt:e.name})})]})},e.id)}))}):Object(n.jsx)("p",{children:"There are no pies that match your search."})]})},ae=a(248);var ne=function(){var e=r.a.useState(null),t=Object(f.a)(e,2),a=t[0],c=t[1],s=r.a.useState(null),i=Object(f.a)(s,2),u=i[0],h=i[1];r.a.useEffect((function(){(function(){var e=Object(O.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P();case 3:t=e.sent,a=t.data,h(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var p=Object(l.h)().id,m=j(),v=Y({text:"",rating:"",pie:p,owner:m.sub}),g=v.formdata,w=v.handleChange,N=Object(l.f)(),k=d();r.a.useEffect((function(){(function(){var e=Object(O.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F(p);case 3:t=e.sent,a=t.data,c(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[p]);var y=function(){var e=Object(O.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.favourites.map((function(e){return e.id})),e.next=3,L(m.sub,{favourites:[].concat(Object(Z.a)(t),[a.id])});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(O.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R({quantity:1,product:p});case 3:N.push("/basket"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(O.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,B(g);case 4:return e.next=6,F(p);case 6:a=e.sent,n=a.data,c(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(O.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M(t);case 3:return e.next=5,F(p);case 5:a=e.sent,n=a.data,c(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)("main",{className:"show-page",children:a?Object(n.jsxs)("section",{className:"box",children:[Object(n.jsxs)("div",{className:"flex-box",children:[Object(n.jsx)("figure",{children:Object(n.jsx)("img",{src:a.image,alt:a.name})}),Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:a.name}),Object(n.jsxs)("h3",{children:["Now only \xa3",a.price.toFixed(2),"!"]}),Object(n.jsx)("p",{children:a.description}),Object(n.jsxs)("section",{className:"flex-box align-center space-between",children:[a.categories&&a.categories.length>0?Object(n.jsx)("ul",{children:a.categories.map((function(e){return Object(n.jsx)("li",{children:Object(n.jsx)(o.b,{to:"/pies",children:e.name})},e.id)}))}):Object(n.jsx)("ul",{}),Object(n.jsx)("div",{className:"flex-box justify-center fav-btn",children:Object(n.jsx)("p",{onClick:y,children:Object(n.jsx)("span",{className:"material-icons",children:"favorite_border"})})})]})]})]}),Object(n.jsx)(o.b,{to:"/pies/".concat(p,"/customise/"),children:Object(n.jsx)("button",{className:"yellow-background checkout-btn customise-btn",children:"Customise this pie"})}),Object(n.jsx)("button",{onClick:S,className:"blue-background checkout-btn",children:"Add to shopping bag"}),Object(n.jsxs)("h2",{children:["What customers are saying about ",a.name,":"]}),Object(n.jsx)("div",{className:"showpage-reviews-wrapper",children:Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(ae.a.Group,{children:[a.reviews&&a.reviews.length>0?a.reviews.map((function(e){return Object(n.jsxs)(ae.a,{value:e.id,className:"box review",children:[Object(n.jsx)(ae.a.Avatar,{src:e.owner.profileImage?e.owner.profileImage:U,className:"avatar"}),Object(n.jsxs)(ae.a.Content,{children:[Object(n.jsxs)(ae.a.Metadata,{children:[Object(n.jsx)("h4",{children:e.owner.username}),Object(n.jsx)("div",{children:e.createdAt.slice(0,10)})]}),Object(n.jsx)(ae.a.Text,{children:e.text}),Object(n.jsxs)(ae.a.Text,{children:["\u2605".repeat(e.rating)," "]}),b(e.owner?e.owner.id:"")?Object(n.jsx)("button",{onClick:function(){return E(e.id)},children:"Delete"}):Object(n.jsx)("br",{})]})]},e.id)})):Object(n.jsx)("div",{children:"Be the first to review this delicious pie!"}),k&&Object(n.jsxs)("form",{onClick:C,className:"review-form",children:[Object(n.jsx)("div",{children:Object(n.jsxs)("label",{children:["Review our ",a.name]})}),Object(n.jsx)("div",{children:Object(n.jsx)("textarea",{onChange:w,name:"text",value:g.text,placeholder:"Leave a review..."})}),Object(n.jsx)("div",{children:Object(n.jsx)("label",{children:"Rate from 1 to 5"})}),Object(n.jsx)("div",{children:Object(n.jsx)("input",{type:"number",onChange:w,name:"rating",min:"1",max:"5",placeholder:"\u2605",value:g.rating})}),Object(n.jsx)("button",{className:"yellow-background",children:"Submit Review"})]})]})})})]}):Object(n.jsx)("section",{children:Object(n.jsx)("div",{children:"Loading..."})})})};var ce=function(e){var t=e.handleChange,a=e.handleSubmit,c=e.formdataCategories,s=r.a.useState([]),i=Object(f.a)(s,2),o=i[0],l=i[1];return r.a.useEffect((function(){(function(){var e=Object(O.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W();case 3:t=e.sent,a=t.data,l(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.jsxs)("form",{onSubmit:a,className:"customise-form",children:[Object(n.jsx)("h3",{className:"light-blue-background",children:"Categories"}),Object(n.jsxs)("section",{children:[o&&c?o.map((function(e){return Object(n.jsxs)("div",{children:[Object(n.jsxs)("label",{children:[e.name," "]}),Object(n.jsx)("input",{type:"checkbox",onChange:t,value:JSON.stringify(e),checked:c.some((function(t){return t.name===e.name}))})]},e.id)})):Object(n.jsx)("label",{children:"No options available"}),Object(n.jsx)("button",{type:"submit",className:"checkout-btn blue-background",onClick:a,children:"Add to basket"})]})]})};var re=function(e){var t=r.a.useState(e),a=Object(f.a)(t,2),n=a[0],c=a[1],s=r.a.useState(e),i=Object(f.a)(s,2),o=i[0],l=i[1];return{formdata:n,setFormdata:c,errors:o,handleChange:function(e){var t="checkbox"===e.target.type?JSON.parse(e.target.value):e.target.value,a=Object(p.a)(Object(p.a)({},n),{},{categories:[].concat(Object(Z.a)(n.categories),[t])}),r=Object(p.a)(Object(p.a)({},o),{},Object(V.a)({},e.target.name,""));c(a),l(r)},setErrors:l}};var se=function(){var e=Object(l.h)().id,t=Object(l.f)(),a=re({categories:[]}),c=a.formdata,s=a.setFormdata,i=a.handleChange,o=a.setErrors;r.a.useEffect((function(){(function(){var t=Object(O.a)(x.a.mark((function t(){var a,n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F(e);case 2:a=t.sent,n=a.data,s(n);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e,s]);var u=function(){var e=Object(O.a)(x.a.mark((function e(t){var a,n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=c.categories.map((function(e){return e.id})),e.prev=2,e.next=5,E(Object(p.a)(Object(p.a)({},c),{},{name:"Custom ".concat(c.name),price:"".concat(c.price+10),reviews:[],categories:a,image:"https://farm9.staticflickr.com/8333/8391597635_2af90bd702.jpg"}));case 5:n=e.sent,r=n.data,j(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),o(e.t0.response.data.errors);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(O.a)(x.a.mark((function e(a){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R({quantity:1,product:a.id});case 3:t.push("/basket"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)("main",{children:[Object(n.jsxs)("h1",{className:"form-heading blue-font",children:["Build Your Own ",c.name,"*"]}),Object(n.jsx)("p",{className:"grey-font",children:"*Some assembly required."}),Object(n.jsx)(ce,{formdataCategories:c.categories,handleChange:i,handleSubmit:u})]})},ie=a(246),oe=a(132);var le=function(){var e=r.a.useState([]),t=Object(f.a)(e,2),a=t[0],c=t[1],s=r.a.useState("View All"),i=Object(f.a)(s,1)[0];Object(l.h)(),r.a.useEffect((function(){(function(){var e=Object(O.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C();case 3:t=e.sent,a=t.data,c(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var u=function(){var e=Object(O.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.filter((function(e){return e.categories.filter((function(e){return e.name===t.target.innerHTML}))})),c(n),"View All"!==i){e.next=4;break}return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=[300,330,270,250];return console.log(function(){var e=Math.floor(Math.random()*j.length);return j[e]}()),Object(n.jsx)(ie.a,{children:Object(n.jsxs)("section",{children:[Object(n.jsx)("div",{className:"category-page-tags",onClick:u,children:["View All","Sweet","Savoury","Cherry","Apple","Meat","Chicken","Pumpkin","Lemon","Pecan","Lamb","Beef","Pork","Fish","Vegetable","Berry","Fruit","Nuts"].map((function(e){return Object(n.jsx)(o.b,{to:"/pies/category/".concat(e),className:"category-tag",children:Object(n.jsx)("div",{className:"category-tag",children:Object(n.jsx)("div",{className:i===e?"ui olive label category-tag":"ui label category-tag",children:e})})},e)}))}),Object(n.jsx)("div",{className:"ui divider"}),Object(n.jsx)("div",{className:"grid-wrapper",children:a?Object(n.jsx)(oe.CSSGrid,{component:"div",columnWidth:290,gutterWidth:50,gutterHeight:50,layout:oe.layout.pinterest,duration:800,columns:3,easing:"ease-out",children:a.map((function(e){return Object(n.jsx)("div",{itemHeight:270,children:Object(n.jsx)(o.b,{to:"/pies/".concat(e.id),children:Object(n.jsxs)("div",{itemHeight:270,className:"category-card",children:[Object(n.jsx)("img",{className:"category-card-image",src:e.image}),Object(n.jsx)("div",{className:"category-card-content",children:Object(n.jsx)("div",{className:"ui header category-card-header",children:e.name})})]},e.name)},a.name)},e.name)}))}):Object(n.jsx)("div",{children:"Loading"})})]})})};var ue=function(){return Object(n.jsxs)(o.a,{children:[Object(n.jsx)(h,{}),Object(n.jsxs)(l.c,{children:[Object(n.jsx)(l.a,{exact:!0,path:"/",component:D}),Object(n.jsx)(l.a,{path:"/pies/category/:id",component:le}),Object(n.jsx)(l.a,{path:"/pies/:id/customise",component:se}),Object(n.jsx)(l.a,{path:"/pies/:id",component:ne}),Object(n.jsx)(l.a,{path:"/profile",component:H}),Object(n.jsx)(l.a,{path:"/wishlist",component:J}),Object(n.jsx)(l.a,{path:"/login",component:z}),Object(n.jsx)(l.a,{path:"/register",component:X}),Object(n.jsx)(l.a,{path:"/basket",component:ee}),Object(n.jsx)(l.a,{path:"/pies",component:te})]})]})};i.a.render(Object(n.jsx)(ue,{}),document.getElementById("root"))}},[[232,1,2]]]);
//# sourceMappingURL=main.5a2c94b6.chunk.js.map